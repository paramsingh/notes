{"pageProps":{"note":{"id":"grimoire-design-v2","title":"Grimoire - Design Doc","desc":"","updated":1738252800000,"created":1738164600000,"custom":{},"fname":"engineering.grimoire","type":"note","vault":{"fsPath":"vault"},"contentHash":"45577f0f4332f563f5fc327329f953a2","links":[{"from":{"fname":"runai.backlog","id":"runai-backlog-8kx7m2","vaultName":"vault"},"type":"backlink","position":{"start":{"line":142,"column":15,"offset":6066},"end":{"line":142,"column":39,"offset":6090},"indent":[]},"value":"engineering.grimoire"}],"anchors":{"grimoire---design-doc-v2":{"type":"header","text":"Grimoire - Design Doc v2","value":"grimoire---design-doc-v2","line":10,"column":0,"depth":1},"concept":{"type":"header","text":"Concept","value":"concept","line":12,"column":0,"depth":2},"key-decisions":{"type":"header","text":"Key Decisions","value":"key-decisions","line":25,"column":0,"depth":2},"tools-7-total":{"type":"header","text":"Tools (7 total)","value":"tools-7-total","line":42,"column":0,"depth":2},"system-prompt":{"type":"header","text":"System Prompt","value":"system-prompt","line":195,"column":0,"depth":2},"context-management-inspired-by-codex":{"type":"header","text":"Context Management (inspired by Codex)","value":"context-management-inspired-by-codex","line":221,"column":0,"depth":2},"uiux":{"type":"header","text":"UI/UX","value":"uiux","line":229,"column":0,"depth":2},"loading-messages-whimsical-fantasy-themed":{"type":"header","text":"Loading Messages (whimsical, fantasy-themed)","value":"loading-messages-whimsical-fantasy-themed","line":231,"column":0,"depth":3},"screens":{"type":"header","text":"Screens","value":"screens","line":242,"column":0,"depth":3},"first-launch-guided-intro":{"type":"header","text":"First Launch (Guided Intro)","value":"first-launch-guided-intro","line":271,"column":0,"depth":3},"architecture":{"type":"header","text":"Architecture","value":"architecture","line":277,"column":0,"depth":2},"tech-stack":{"type":"header","text":"Tech Stack","value":"tech-stack","line":309,"column":0,"depth":2},"file-structure":{"type":"header","text":"File Structure","value":"file-structure","line":321,"column":0,"depth":2},"milestones":{"type":"header","text":"Milestones","value":"milestones","line":336,"column":0,"depth":2},"v01---proof-of-concept":{"type":"header","text":"v0.1 - Proof of concept","value":"v01---proof-of-concept","line":338,"column":0,"depth":3},"v02---core-functionality":{"type":"header","text":"v0.2 - Core functionality","value":"v02---core-functionality","line":345,"column":0,"depth":3},"v03---daily-driver":{"type":"header","text":"v0.3 - Daily driver","value":"v03---daily-driver","line":353,"column":0,"depth":3},"v04---polish":{"type":"header","text":"v0.4 - Polish","value":"v04---polish","line":361,"column":0,"depth":3},"v05---release-ready":{"type":"header","text":"v0.5 - Release ready","value":"v05---release-ready","line":368,"column":0,"depth":3},"future-features-post-mvp":{"type":"header","text":"Future Features (post-MVP)","value":"future-features-post-mvp","line":374,"column":0,"depth":2},"references":{"type":"header","text":"References","value":"references","line":383,"column":0,"depth":2}},"children":[],"parent":"J6qb2iUM2ZMqAYgQQELzQ","data":{}},"body":"<h1 id=\"grimoire---design-doc\">Grimoire - Design Doc<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#grimoire---design-doc\"></a></h1>\n<blockquote>\n<p>This note was generated with AI assistance.</p>\n</blockquote>\n<h1 id=\"grimoire---design-doc-v2\">Grimoire - Design Doc v2<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#grimoire---design-doc-v2\"></a></h1>\n<h2 id=\"concept\">Concept<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#concept\"></a></h2>\n<p><strong>Grimoire</strong> - A mobile app that brings the Claude Code experience to your phone. Chat with Claude, and it can read/write files in a notes folder on your device. Open canvas, user-defined workflows.</p>\n<p><strong>Core value prop:</strong> \"Claude that can read/write your files, and you can see everything it knows.\"</p>\n<p><strong>Differentiators:</strong></p>\n<ul>\n<li>Files on YOUR device - portable, private, auditable</li>\n<li>Transparency - see exactly what the AI knows (not a black box)</li>\n<li>Conversational-first - talk to manage your notes, not manual editing</li>\n<li>AI as author - detailed notes because Claude writes them</li>\n<li>Open canvas - no opinionated workflow, you define how you use it</li>\n</ul>\n<h2 id=\"key-decisions\">Key Decisions<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#key-decisions\"></a></h2>\n<div class=\"table-responsive\">\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>Decision</th><th>Choice</th></tr></thead><tbody><tr><td><strong>Name</strong></td><td>Grimoire</td></tr><tr><td><strong>Pricing</strong></td><td>BYOK (Bring Your Own Key) - no backend</td></tr><tr><td><strong>Model</strong></td><td>Claude Opus</td></tr><tr><td><strong>Platform</strong></td><td>Android-first (Pixel 10 Pro), iOS via Expo</td></tr><tr><td><strong>Home screen</strong></td><td>Chat - open canvas</td></tr><tr><td><strong>Conversations</strong></td><td>Session-based (fresh each time, notes persist)</td></tr><tr><td><strong>Context limit</strong></td><td>Auto-compact when exceeded</td></tr><tr><td><strong>File structure</strong></td><td>Subfolders allowed, Claude organizes</td></tr><tr><td><strong>Storage</strong></td><td>App documents (private)</td></tr><tr><td><strong>Personality</strong></td><td>Subtle fantasy flavor</td></tr><tr><td><strong>Dark mode</strong></td><td>Yes (must-have)</td></tr><tr><td><strong>Share extension</strong></td><td>Yes (must-have)</td></tr></tbody></table></div>\n<h2 id=\"tools-7-total\">Tools (7 total)<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#tools-7-total\"></a></h2>\n<p>Codex-compatible where possible, plus simple write/edit for notes.</p>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> tools <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token comment\">// === Codex-compatible read tools ===</span>\n  <span class=\"token punctuation\">{</span>\n    name<span class=\"token operator\">:</span> <span class=\"token string\">\"list_dir\"</span><span class=\"token punctuation\">,</span>\n    description<span class=\"token operator\">:</span> <span class=\"token string\">\"Lists entries in a directory with type labels (file/dir)\"</span><span class=\"token punctuation\">,</span>\n    input_schema<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      type<span class=\"token operator\">:</span> <span class=\"token string\">\"object\"</span><span class=\"token punctuation\">,</span>\n      properties<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        path<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          type<span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">,</span>\n          description<span class=\"token operator\">:</span> <span class=\"token string\">\"Path to directory (relative to notes root, defaults to root)\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        offset<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          type<span class=\"token operator\">:</span> <span class=\"token string\">\"number\"</span><span class=\"token punctuation\">,</span>\n          description<span class=\"token operator\">:</span> <span class=\"token string\">\"Entry number to start from (1-indexed)\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        limit<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          type<span class=\"token operator\">:</span> <span class=\"token string\">\"number\"</span><span class=\"token punctuation\">,</span>\n          description<span class=\"token operator\">:</span> <span class=\"token string\">\"Maximum number of entries to return\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        depth<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          type<span class=\"token operator\">:</span> <span class=\"token string\">\"number\"</span><span class=\"token punctuation\">,</span>\n          description<span class=\"token operator\">:</span> <span class=\"token string\">\"Maximum directory depth to traverse (1 = current dir only)\"</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    name<span class=\"token operator\">:</span> <span class=\"token string\">\"read_file\"</span><span class=\"token punctuation\">,</span>\n    description<span class=\"token operator\">:</span> <span class=\"token string\">\"Reads a file with 1-indexed line numbers\"</span><span class=\"token punctuation\">,</span>\n    input_schema<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      type<span class=\"token operator\">:</span> <span class=\"token string\">\"object\"</span><span class=\"token punctuation\">,</span>\n      properties<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        path<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          type<span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">,</span>\n          description<span class=\"token operator\">:</span> <span class=\"token string\">\"Path to file (relative to notes root)\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        offset<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          type<span class=\"token operator\">:</span> <span class=\"token string\">\"number\"</span><span class=\"token punctuation\">,</span>\n          description<span class=\"token operator\">:</span> <span class=\"token string\">\"Line number to start reading from (1-indexed)\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        limit<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          type<span class=\"token operator\">:</span> <span class=\"token string\">\"number\"</span><span class=\"token punctuation\">,</span>\n          description<span class=\"token operator\">:</span> <span class=\"token string\">\"Maximum number of lines to return\"</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      required<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"path\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    name<span class=\"token operator\">:</span> <span class=\"token string\">\"grep_files\"</span><span class=\"token punctuation\">,</span>\n    description<span class=\"token operator\">:</span> <span class=\"token string\">\"Search for pattern across files, returns matching files sorted by modification time\"</span><span class=\"token punctuation\">,</span>\n    input_schema<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      type<span class=\"token operator\">:</span> <span class=\"token string\">\"object\"</span><span class=\"token punctuation\">,</span>\n      properties<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        pattern<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          type<span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">,</span>\n          description<span class=\"token operator\">:</span> <span class=\"token string\">\"Regular expression pattern to search for\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        include<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          type<span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">,</span>\n          description<span class=\"token operator\">:</span> <span class=\"token string\">\"Glob to filter files (e.g. '*.md', 'projects/**/*.md')\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        path<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          type<span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">,</span>\n          description<span class=\"token operator\">:</span> <span class=\"token string\">\"Directory to search (defaults to notes root)\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        limit<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          type<span class=\"token operator\">:</span> <span class=\"token string\">\"number\"</span><span class=\"token punctuation\">,</span>\n          description<span class=\"token operator\">:</span> <span class=\"token string\">\"Maximum number of results (defaults to 100)\"</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      required<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"pattern\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    name<span class=\"token operator\">:</span> <span class=\"token string\">\"view_image\"</span><span class=\"token punctuation\">,</span>\n    description<span class=\"token operator\">:</span> <span class=\"token string\">\"View an image file from the notes folder\"</span><span class=\"token punctuation\">,</span>\n    input_schema<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      type<span class=\"token operator\">:</span> <span class=\"token string\">\"object\"</span><span class=\"token punctuation\">,</span>\n      properties<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        path<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          type<span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">,</span>\n          description<span class=\"token operator\">:</span> <span class=\"token string\">\"Path to image file (relative to notes root)\"</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      required<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"path\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// === Notes-specific write tools ===</span>\n  <span class=\"token punctuation\">{</span>\n    name<span class=\"token operator\">:</span> <span class=\"token string\">\"write_file\"</span><span class=\"token punctuation\">,</span>\n    description<span class=\"token operator\">:</span> <span class=\"token string\">\"Create a new file or overwrite an existing one\"</span><span class=\"token punctuation\">,</span>\n    input_schema<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      type<span class=\"token operator\">:</span> <span class=\"token string\">\"object\"</span><span class=\"token punctuation\">,</span>\n      properties<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        path<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          type<span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">,</span>\n          description<span class=\"token operator\">:</span> <span class=\"token string\">\"Path to file (can include subdirectories, will be created)\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        content<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          type<span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">,</span>\n          description<span class=\"token operator\">:</span> <span class=\"token string\">\"Content to write\"</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      required<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"path\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"content\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    name<span class=\"token operator\">:</span> <span class=\"token string\">\"edit_file\"</span><span class=\"token punctuation\">,</span>\n    description<span class=\"token operator\">:</span> <span class=\"token string\">\"Edit a file by finding and replacing text\"</span><span class=\"token punctuation\">,</span>\n    input_schema<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      type<span class=\"token operator\">:</span> <span class=\"token string\">\"object\"</span><span class=\"token punctuation\">,</span>\n      properties<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        path<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          type<span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">,</span>\n          description<span class=\"token operator\">:</span> <span class=\"token string\">\"Path to file\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        old_text<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          type<span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">,</span>\n          description<span class=\"token operator\">:</span> <span class=\"token string\">\"Text to find (must be unique in file)\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        new_text<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          type<span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">,</span>\n          description<span class=\"token operator\">:</span> <span class=\"token string\">\"Text to replace with\"</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      required<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"path\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"old_text\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"new_text\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    name<span class=\"token operator\">:</span> <span class=\"token string\">\"delete_file\"</span><span class=\"token punctuation\">,</span>\n    description<span class=\"token operator\">:</span> <span class=\"token string\">\"Delete a file or empty directory\"</span><span class=\"token punctuation\">,</span>\n    input_schema<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      type<span class=\"token operator\">:</span> <span class=\"token string\">\"object\"</span><span class=\"token punctuation\">,</span>\n      properties<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        path<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          type<span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">,</span>\n          description<span class=\"token operator\">:</span> <span class=\"token string\">\"Path to file or empty directory to delete\"</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      required<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"path\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span>\n</code></pre>\n<h2 id=\"system-prompt\">System Prompt<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#system-prompt\"></a></h2>\n<pre><code>You are the spirit of Grimoire, a magical tome that helps the user manage their personal knowledge. You have access to their notes folder and can read, write, edit, search, and view images.\n\nAvailable tools:\n- list_dir: See what files and folders exist (supports depth for nested view)\n- read_file: Read a file's contents (supports offset/limit for large files)\n- grep_files: Search for patterns across files (supports glob filtering)\n- view_image: Look at an image in the notes folder\n- write_file: Create or overwrite a file (creates subdirectories as needed)\n- edit_file: Modify part of a file by finding and replacing text\n- delete_file: Remove a file or empty directory\n\nGuidelines:\n- When the user asks about something, check if there's a relevant note first\n- Organize notes logically - use subdirectories when it makes sense\n- Use markdown formatting in notes\n- When updating notes, preserve existing content unless asked to replace\n- Be transparent about what files you're reading/writing\n- Keep a subtle magical flavor in your responses, but stay practical and helpful\n- When the user shares an image, you can save it and reference it in notes\n\nFirst conversation: Welcome the user and ask what they'd like to use Grimoire for.\n</code></pre>\n<h2 id=\"context-management-inspired-by-codex\">Context Management (inspired by Codex)<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#context-management-inspired-by-codex\"></a></h2>\n<ul>\n<li><strong>On-demand tools</strong> - read files only when needed for the task</li>\n<li><strong>No auto file list</strong> - Claude discovers via <code>list_files</code> when relevant</li>\n<li><strong>Session-based</strong> - conversation resets on app open, notes persist</li>\n<li><strong>Auto-compact</strong> - when context limit hit, summarize older messages</li>\n<li><strong>Environment injection</strong> - tell Claude the notes folder path</li>\n</ul>\n<h2 id=\"uiux\">UI/UX<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#uiux\"></a></h2>\n<h3 id=\"loading-messages-whimsical-fantasy-themed\">Loading Messages (whimsical, fantasy-themed)<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#loading-messages-whimsical-fantasy-themed\"></a></h3>\n<p>While Claude is thinking or executing tools:</p>\n<ul>\n<li>\"Consulting the archives...\"</li>\n<li>\"Scrying your notes...\"</li>\n<li>\"Leafing through the tome...\"</li>\n<li>\"Channeling ancient wisdom...\"</li>\n<li>\"Inscribing new knowledge...\"</li>\n<li>\"Divining connections...\"</li>\n<li>\"Weaving the threads...\"</li>\n</ul>\n<h3 id=\"screens\">Screens<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#screens\"></a></h3>\n<ol>\n<li>\n<p><strong>Chat Screen (main)</strong></p>\n<ul>\n<li>Full-screen chat, message input at bottom</li>\n<li>Streaming responses with fantasy loading messages</li>\n<li>Tool calls shown inline (\"ğŸ“– Reading projects/coach-vayu.md...\")</li>\n<li>Floating action button to open file browser</li>\n<li>Camera button to take photo and attach to message</li>\n<li>Image picker to attach existing photos</li>\n<li>Dark mode by default</li>\n</ul>\n</li>\n<li>\n<p><strong>File Browser</strong></p>\n<ul>\n<li>List of files/folders with icons</li>\n<li>Tap folder to navigate, tap file to view</li>\n<li>Simple create/delete actions</li>\n<li>Back to chat</li>\n</ul>\n</li>\n<li>\n<p><strong>File Viewer</strong></p>\n<ul>\n<li>Rendered markdown</li>\n<li>Edit button to open raw editor</li>\n<li>Delete option</li>\n<li>Share button</li>\n</ul>\n</li>\n<li>\n<p><strong>Settings</strong></p>\n<ul>\n<li>API key input (secure storage)</li>\n<li>Export notes (zip)</li>\n<li>Clear conversation</li>\n<li>About/version</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"first-launch-guided-intro\">First Launch (Guided Intro)<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#first-launch-guided-intro\"></a></h3>\n<ol>\n<li>API key setup screen</li>\n<li>Welcome message from Grimoire spirit</li>\n<li>Claude asks: \"Welcome, keeper. What knowledge shall we chronicle together?\"</li>\n</ol>\n<h2 id=\"architecture\">Architecture<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#architecture\"></a></h2>\n<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                 Grimoire App                 â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚\nâ”‚  â”‚   Chat UI   â”‚    â”‚   File Browser     â”‚  â”‚\nâ”‚  â”‚  (streaming)â”‚    â”‚   (expo-router)    â”‚  â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚\nâ”‚         â”‚                     â”‚             â”‚\nâ”‚         â–¼                     â–¼             â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚\nâ”‚  â”‚          Tool Execution Layer           â”‚â”‚\nâ”‚  â”‚  list | read | write | edit | search   â”‚â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚\nâ”‚                 â”‚                            â”‚\nâ”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”                   â”‚\nâ”‚         â–¼               â–¼                   â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚\nâ”‚  â”‚ Claude API â”‚  â”‚ File System â”‚            â”‚\nâ”‚  â”‚  (Opus)    â”‚  â”‚ (expo-fs)   â”‚            â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚\nâ”‚                                             â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚\nâ”‚  â”‚           Local Storage                 â”‚â”‚\nâ”‚  â”‚  - API key (vayu-storage)              â”‚â”‚\nâ”‚  â”‚  - Settings (AsyncStorage)             â”‚â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n</code></pre>\n<h2 id=\"tech-stack\">Tech Stack<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#tech-stack\"></a></h2>\n<ul>\n<li><strong>Framework:</strong> Expo / React Native</li>\n<li><strong>Navigation:</strong> expo-router</li>\n<li><strong>File system:</strong> expo-file-system</li>\n<li><strong>Camera:</strong> expo-camera + expo-image-picker</li>\n<li><strong>Secure storage:</strong> vayu-storage (already built!)</li>\n<li><strong>AI:</strong> Claude API with tool use, streaming, vision</li>\n<li><strong>Markdown:</strong> react-native-markdown-display</li>\n<li><strong>State:</strong> Zustand (simple, performant)</li>\n<li><strong>Dark mode:</strong> React Native appearance API</li>\n</ul>\n<h2 id=\"file-structure\">File Structure<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#file-structure\"></a></h2>\n<pre><code>App Documents/\nâ””â”€â”€ grimoire/\n    â””â”€â”€ notes/\n        â”œâ”€â”€ inbox.md\n        â”œâ”€â”€ daily/\n        â”‚   â””â”€â”€ 2026-01-30.md\n        â”œâ”€â”€ projects/\n        â”‚   â””â”€â”€ coach-vayu.md\n        â””â”€â”€ images/\n            â””â”€â”€ 2026-01-30-receipt.jpg\n</code></pre>\n<h2 id=\"milestones\">Milestones<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#milestones\"></a></h2>\n<h3 id=\"v01---proof-of-concept\">v0.1 - Proof of concept<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#v01---proof-of-concept\"></a></h3>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Expo project scaffold with expo-router</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Basic chat UI with streaming</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Claude API integration with tool use</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Single tool working (read_file)</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Hardcoded notes folder</li>\n</ul>\n<h3 id=\"v02---core-functionality\">v0.2 - Core functionality<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#v02---core-functionality\"></a></h3>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> All 7 tools working (list_dir, read_file, grep_files, view_image, write_file, edit_file, delete_file)</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> File browser UI</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Markdown rendering</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Subfolder support</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Camera capture + image picker</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Images sent to Claude via vision API</li>\n</ul>\n<h3 id=\"v03---daily-driver\">v0.3 - Daily driver<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#v03---daily-driver\"></a></h3>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Settings screen with API key (vayu-storage)</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Dark mode</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Whimsical loading messages</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Tool calls shown inline</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Auto-compact for long conversations</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Test on Pixel 10 Pro</li>\n</ul>\n<h3 id=\"v04---polish\">v0.4 - Polish<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#v04---polish\"></a></h3>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Guided intro / first-run experience</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Export notes as zip</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Share extension (receive shared content)</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Error handling and recovery</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Subtle fantasy personality in system prompt</li>\n</ul>\n<h3 id=\"v05---release-ready\">v0.5 - Release ready<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#v05---release-ready\"></a></h3>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Play Store listing</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Basic analytics</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Crash reporting</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Internal testing</li>\n</ul>\n<h2 id=\"future-features-post-mvp\">Future Features (post-MVP)<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#future-features-post-mvp\"></a></h2>\n<ul>\n<li>iCloud / Google Drive sync</li>\n<li>Voice input</li>\n<li>PDF support in notes</li>\n<li>Widgets</li>\n<li>Multiple workspaces</li>\n<li>iOS App Store release</li>\n</ul>\n<h2 id=\"references\">References<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#references\"></a></h2>\n<ul>\n<li>Codex CLI architecture: <code>~/code/codex</code> (cloned for reference)</li>\n<li>vayu-storage: <code>~/code/vayu-storage</code> (reusable secure storage)</li>\n</ul>\n<hr>\n<strong>Backlinks</strong>\n<ul>\n<li><a href=\"/notes/runai-backlog-8kx7m2\">RunAI Backlog</a></li>\n</ul>","noteIndex":{"id":"root","title":"Notes","desc":"","updated":1676546314176,"created":1595961348801,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"vault"},"contentHash":"a63bc749050c89d4e92bc7f1ce268820","links":[{"type":"wiki","from":{"fname":"root","id":"root","vaultName":"vault"},"value":"history.laphams_quarterly.democracy.campaign_finance","position":{"start":{"line":13,"column":3,"offset":455},"end":{"line":13,"column":59,"offset":511},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"history.laphams_quarterly.democracy.campaign_finance"}},{"type":"wiki","from":{"fname":"root","id":"root","vaultName":"vault"},"value":"engineering.being_a_mentor","position":{"start":{"line":14,"column":3,"offset":514},"end":{"line":14,"column":33,"offset":544},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"engineering.being_a_mentor"}},{"type":"wiki","from":{"fname":"root","id":"root","vaultName":"vault"},"value":"history.china.dynasties","position":{"start":{"line":15,"column":3,"offset":547},"end":{"line":15,"column":30,"offset":574},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"history.china.dynasties"}},{"type":"wiki","from":{"fname":"root","id":"root","vaultName":"vault"},"value":"history.india.indira_gandhi","position":{"start":{"line":16,"column":3,"offset":577},"end":{"line":16,"column":34,"offset":608},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"history.india.indira_gandhi"}},{"type":"wiki","from":{"fname":"root","id":"root","vaultName":"vault"},"value":"books","alias":"here","position":{"start":{"line":18,"column":35,"offset":644},"end":{"line":18,"column":49,"offset":658},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"books"}},{"type":"wiki","from":{"fname":"root","id":"root","vaultName":"vault"},"value":"engineering.dendron","alias":"Dendron","position":{"start":{"line":20,"column":21,"offset":681},"end":{"line":20,"column":52,"offset":712},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"engineering.dendron"}}],"anchors":{},"children":["05zaQJMyCo5kYcUdfqHbU","3dca4f75-0a84-4596-8fd3-38f0adbef2b9","2fr0tv2ahut83b6g2w81mz0","596IGh04441uyLbbpkFT1","3j8u7RlelDYoffRQgMIYg","vwq8iGNrINwTnn2qz9cR1","J6qb2iUM2ZMqAYgQQELzQ","tbk0j8n293h69lwldtfsg3u","fSkjQcqYZTGdomGRSlszf","T4ea2dCnXXW7SbPu0BnwF","sfaxl8m0scx0iylroh2nt27","G9wFXoaipKfEf6FlKdHH0","qvk3fygz1m6ws2fji5retj1","8zcz6vwjqab27tqeygao1p7","7nAQ226q3pwfVvQ9KSV80","XLgWwAI1l8XFqJ55YDMXU","Y48aQXzL3qv0LWZAG5Kbz","njqts253mv1fp9o0jkcw1fe","ceddHaDRTozEjfGqQbeNi","9bn8iwfv72uv75ionw8ftql","qjsa2cqk7wwmsxkd63tqmzo","i137wds83cgyiqkpuorvrgh","nbajhp0d12thgwdtlxlo4s5","j9m60mwn8tah0puxr287hbz","awb5kxy7q19yk7564umdlz1","sxs92ymdmvudd9w9abdf2xm","maqyjfimzm1xlreqrnp0ubv","occnxujjcmph9kqq4dtx79g","0r968pvsf565fs54ac85ug0","0iug0cqfida2w3bw9r2y39x","71jowrrvmteaz6vmk3ljq0z","4rahpe1jwc8wf301wril41i","ooi7xp8hw96cr9v8eeg0qxn","100p65il8y0afy0ut38euym","ue8gju4jz5sa6s57r0qbkeq","4uelk0suzbfnl472i8zxi5p","56i0l7vo9k1enmfm627d4q1","52ertzgdog1o9jfdtga8vvt","0lisa2vcu9jh435u9gks8p5"],"parent":null,"data":{},"body":"\nHi! I'm Param! This is a place for my personal notes.\n\nMy website is https://param.codes, and I write more readable\nstuff on my substack: https://newsletter.param.codes.\n\nI've found that taking notes helps me remember things, and it's nice\nto look back on information that you processed years ago. I jot down random things, there's no real structure, but some of these\nnotes could eventually become blog posts.\n\nSome notes you might find interesting:\n\n- [[history.laphams_quarterly.democracy.campaign_finance]]\n- [[engineering.being_a_mentor]]\n- [[history.china.dynasties]]\n- [[history.india.indira_gandhi]]\n\nI also keep notes on books I read [[here|books]].\n\nThis is built using [[Dendron|engineering.dendron]] and hosted using\n[GitHub Pages](https://github.com/paramsingh/notes).\n\nGet in touch via [Twitter](https://twitter.com/iliekcomputers) or email me at `me [at] param [dot] codes`!\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"previewV2Enabled":false,"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":false,"leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2,"vaultSelectionModeOnCreate":"smart"}},"insertNote":{"initialValue":"templates"},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"randomNote":{},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"dendronVersion":"0.89.0","vaults":[{"fsPath":"vault"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":true,"maxPreviewsCached":10,"maxNoteLength":204800,"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link","taskCompleteStatus":["done","x"]},"enableUserTags":true,"enableHashTags":true,"enableEditorDecorations":true,"enableHandlebarTemplates":true,"enableFullHierarchyNoteTitle":false,"enableSmartRefs":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false,"enableFrontmatterTags":true,"enableHashesForFMTags":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"/param/notes","description":"param's notes"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"lookup","enableMermaid":true,"siteUrl":"https://notes.param.codes/","duplicateNoteBehavior":{"action":"useVault","payload":["vault"]},"siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true}
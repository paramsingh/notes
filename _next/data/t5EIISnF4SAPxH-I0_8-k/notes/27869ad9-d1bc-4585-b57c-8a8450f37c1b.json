{"pageProps":{"note":{"id":"27869ad9-d1bc-4585-b57c-8a8450f37c1b","title":"ListenBrainz release process changes","desc":"","updated":1642957246800,"created":1616191204967,"custom":{},"fname":"engineering.listenbrainz_process_changes","type":"note","vault":{"fsPath":"vault"},"contentHash":"0153f8bb02e8e6c63f3ecf0814f88682","links":[{"from":{"fname":"engineering.being_a_mentor","id":"3ef975da-c18f-45b4-a95f-532c7d20d83f","vaultName":"vault"},"type":"backlink","position":{"start":{"line":9,"column":50,"offset":413},"end":{"line":9,"column":112,"offset":475},"indent":[]},"value":"engineering.listenbrainz_process_changes"}],"anchors":{"before":{"type":"header","text":"Before","value":"before","line":10,"column":0,"depth":2},"after":{"type":"header","text":"After","value":"after","line":28,"column":0,"depth":2}},"children":[],"parent":"J6qb2iUM2ZMqAYgQQELzQ","data":{}},"body":"<h1 id=\"listenbrainz-release-process-changes\">ListenBrainz release process changes<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#listenbrainz-release-process-changes\"></a></h1>\n<p>Over the past year, I've made a major change in how we think about releases for <a href=\"https://listenbrainz.org\">ListenBrainz</a>.</p>\n<h2 id=\"before\">Before<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#before\"></a></h2>\n<p>There were no real expectations around deployment after pull requests got merged.\nThere were two branches -- <code>master</code> and <code>production</code>. The HEAD of <code>production</code> is\nwhat the site was running at any moment. People made pull requests based off <code>master</code>, stuff got merged into <code>master</code>\nand <em>eventually</em> got released.</p>\n<p>Each release required merging master into production. However, there may have been hotfixes to production in the meanwhile\nas well. So what we ended up doing to bring master and production into sync was:</p>\n<ol>\n<li>Merge <code>master</code> into <code>production</code>.</li>\n<li>Deploy the <code>production</code> branch.</li>\n<li>Merge <code>production</code> back into <code>master</code>.</li>\n</ol>\n<p>The time between releases could be months! The commit difference between master and production\nwas often in the order of hundreds. This made releases painful and we had to be extra careful. If there\nwas a schema change involved, that made things even more complicated.</p>\n<h2 id=\"after\">After<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#after\"></a></h2>\n<p>The change that we made is merging stuff into master as often as possible. And as soon as it's merged, release\nthe changes into production. This set up a decent pipeline where each release consisted of a small number of pull requests,\nmaking it much easier to release stuff.</p>\n<p>Over the last 3 months, we've done 33 releases (almost 3 deploys a week), which account for ~400 commits.</p>\n<p>There have been a number of advantages to this approach. The deployer doesn't feel as concerned releasing 1 small pull\nrequest vs releasing 100 huge pull requests merged into master a few months ago. It also sets up a quick feedback loop\nfor the developer who gets to see their changes working in real life as soon as their pull request gets merged.</p>\n<p>Given our engineering capacity, this new method of releasing stuff often has really helped in making ListenBrainz\na more active project.</p>\n<hr>\n<strong>Backlinks</strong>\n<ul>\n<li><a href=\"/notes/3ef975da-c18f-45b4-a95f-532c7d20d83f\">Being a GSoC mentor</a></li>\n</ul>","noteIndex":{"id":"root","title":"Notes","desc":"","updated":1676546314176,"created":1595961348801,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"vault"},"contentHash":"a63bc749050c89d4e92bc7f1ce268820","links":[{"type":"wiki","from":{"fname":"root","id":"root","vaultName":"vault"},"value":"history.laphams_quarterly.democracy.campaign_finance","position":{"start":{"line":13,"column":3,"offset":455},"end":{"line":13,"column":59,"offset":511},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"history.laphams_quarterly.democracy.campaign_finance"}},{"type":"wiki","from":{"fname":"root","id":"root","vaultName":"vault"},"value":"engineering.being_a_mentor","position":{"start":{"line":14,"column":3,"offset":514},"end":{"line":14,"column":33,"offset":544},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"engineering.being_a_mentor"}},{"type":"wiki","from":{"fname":"root","id":"root","vaultName":"vault"},"value":"history.china.dynasties","position":{"start":{"line":15,"column":3,"offset":547},"end":{"line":15,"column":30,"offset":574},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"history.china.dynasties"}},{"type":"wiki","from":{"fname":"root","id":"root","vaultName":"vault"},"value":"history.india.indira_gandhi","position":{"start":{"line":16,"column":3,"offset":577},"end":{"line":16,"column":34,"offset":608},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"history.india.indira_gandhi"}},{"type":"wiki","from":{"fname":"root","id":"root","vaultName":"vault"},"value":"books","alias":"here","position":{"start":{"line":18,"column":35,"offset":644},"end":{"line":18,"column":49,"offset":658},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"books"}},{"type":"wiki","from":{"fname":"root","id":"root","vaultName":"vault"},"value":"engineering.dendron","alias":"Dendron","position":{"start":{"line":20,"column":21,"offset":681},"end":{"line":20,"column":52,"offset":712},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"engineering.dendron"}}],"anchors":{},"children":["05zaQJMyCo5kYcUdfqHbU","3dca4f75-0a84-4596-8fd3-38f0adbef2b9","2fr0tv2ahut83b6g2w81mz0","596IGh04441uyLbbpkFT1","3j8u7RlelDYoffRQgMIYg","vwq8iGNrINwTnn2qz9cR1","J6qb2iUM2ZMqAYgQQELzQ","tbk0j8n293h69lwldtfsg3u","fSkjQcqYZTGdomGRSlszf","T4ea2dCnXXW7SbPu0BnwF","G9wFXoaipKfEf6FlKdHH0","qvk3fygz1m6ws2fji5retj1","8zcz6vwjqab27tqeygao1p7","7nAQ226q3pwfVvQ9KSV80","XLgWwAI1l8XFqJ55YDMXU","Y48aQXzL3qv0LWZAG5Kbz","njqts253mv1fp9o0jkcw1fe","ceddHaDRTozEjfGqQbeNi","9bn8iwfv72uv75ionw8ftql","9mktb5y6nj7k2ybk8skpluv","8hwssya27ueepgrhlpdrfjd","7gck2zgd0zwdmgk9qgpos18","f01xrwkzbb4fzmupyjke59w","lqzeenqabtz689u30ii9azs","m1jb1iraefzo1rm6etj0du4","7can3uzghi01mfsp134rspp","q7wfcfca8zpa4z1i311vbq5","qyxwih7t2evrubc8r1ei6cb","w7j8brta5l7nl4s9izbzqns","n71onqf9jip4rfm15wkhkcr","paatgicnci0cib43y2dq09m","tpt26m8fl897kze8lssgt00"],"parent":null,"data":{},"body":"\nHi! I'm Param! This is a place for my personal notes.\n\nMy website is https://param.codes, and I write more readable\nstuff on my substack: https://newsletter.param.codes.\n\nI've found that taking notes helps me remember things, and it's nice\nto look back on information that you processed years ago. I jot down random things, there's no real structure, but some of these\nnotes could eventually become blog posts.\n\nSome notes you might find interesting:\n\n- [[history.laphams_quarterly.democracy.campaign_finance]]\n- [[engineering.being_a_mentor]]\n- [[history.china.dynasties]]\n- [[history.india.indira_gandhi]]\n\nI also keep notes on books I read [[here|books]].\n\nThis is built using [[Dendron|engineering.dendron]] and hosted using\n[GitHub Pages](https://github.com/paramsingh/notes).\n\nGet in touch via [Twitter](https://twitter.com/iliekcomputers) or email me at `me [at] param [dot] codes`!\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"previewV2Enabled":false,"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":false,"leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2,"vaultSelectionModeOnCreate":"smart"}},"insertNote":{"initialValue":"templates"},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"randomNote":{},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"dendronVersion":"0.89.0","vaults":[{"fsPath":"vault"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":true,"maxPreviewsCached":10,"maxNoteLength":204800,"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link","taskCompleteStatus":["done","x"]},"enableUserTags":true,"enableHashTags":true,"enableEditorDecorations":true,"enableHandlebarTemplates":true,"enableFullHierarchyNoteTitle":false,"enableSmartRefs":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false,"enableFrontmatterTags":true,"enableHashesForFMTags":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"/param/notes","description":"param's notes"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"lookup","enableMermaid":true,"siteUrl":"https://notes.param.codes/","duplicateNoteBehavior":{"action":"useVault","payload":["vault"]},"siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true}
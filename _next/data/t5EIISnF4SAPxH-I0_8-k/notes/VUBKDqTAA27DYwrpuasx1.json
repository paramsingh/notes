{"pageProps":{"note":{"id":"VUBKDqTAA27DYwrpuasx1","title":"Dan Boneh - Blockchain Primitives - Cryptography and Consensus","desc":"","updated":1637436052322,"created":1637431886271,"custom":{},"fname":"engineering.crypto.a16z_startup_school.blockchain_primitives","type":"note","vault":{"fsPath":"vault"},"contentHash":"914c7ce016dd757901708ecc4baae214","links":[{"from":{"fname":"engineering.crypto.a16z_startup_school","id":"qIDKNY3T3p7TIDspuJyQH","vaultName":"vault"},"type":"backlink","position":{"start":{"line":7,"column":3,"offset":183},"end":{"line":7,"column":101,"offset":281},"indent":[]},"value":"engineering.crypto.a16z_startup_school.blockchain_primitives"}],"anchors":{"what-is-a-blockchain":{"type":"header","text":"What is a blockchain?","value":"what-is-a-blockchain","line":11,"column":0,"depth":1},"layer-1----consensus-layer":{"type":"header","text":"Layer 1 -- Consensus layer","value":"layer-1----consensus-layer","line":24,"column":0,"depth":2},"how-are-blocks-added-to-the-chain":{"type":"header","text":"How are blocks added to the chain?","value":"how-are-blocks-added-to-the-chain","line":37,"column":0,"depth":3},"layer-15----blockchain-computer":{"type":"header","text":"Layer 1.5 -- Blockchain computer","value":"layer-15----blockchain-computer","line":58,"column":0,"depth":2},"running-programs-on-a-blockchain":{"type":"header","text":"Running programs on a blockchain","value":"running-programs-on-a-blockchain","line":67,"column":0,"depth":2},"execution-environment":{"type":"header","text":"Execution environment","value":"execution-environment","line":76,"column":0,"depth":2},"decentralized-applications-dapps":{"type":"header","text":"Decentralized Applications (dapps)","value":"decentralized-applications-dapps","line":85,"column":0,"depth":2},"layer-4---user-facing-servers":{"type":"header","text":"Layer 4 - user facing servers","value":"layer-4---user-facing-servers","line":89,"column":0,"depth":2},"cryptographic-primitives":{"type":"header","text":"Cryptographic primitives","value":"cryptographic-primitives","line":96,"column":0,"depth":1},"digital-signatures--aggregation":{"type":"header","text":"Digital signatures + aggregation","value":"digital-signatures--aggregation","line":100,"column":0,"depth":2},"signatures-on-the-blockchain":{"type":"header","text":"Signatures on the blockchain","value":"signatures-on-the-blockchain","line":106,"column":0,"depth":3},"signature-aggregation":{"type":"header","text":"Signature aggregation","value":"signature-aggregation","line":114,"column":0,"depth":3},"merkle-commitments":{"type":"header","text":"Merkle commitments","value":"merkle-commitments","line":121,"column":0,"depth":2},"properties":{"type":"header","text":"Properties","value":"properties","line":135,"column":0,"depth":3},"merkle-tree":{"type":"header","text":"Merkle tree","value":"merkle-tree","line":140,"column":0,"depth":3},"zero-knowledge-proof-system":{"type":"header","text":"Zero knowledge proof system","value":"zero-knowledge-proof-system","line":150,"column":0,"depth":2},"remember":{"type":"header","text":"REMEMBER","value":"remember","line":170,"column":0,"depth":2}},"children":[],"parent":"qIDKNY3T3p7TIDspuJyQH","data":{}},"body":"<h1 id=\"dan-boneh---blockchain-primitives---cryptography-and-consensus\">Dan Boneh - Blockchain Primitives - Cryptography and Consensus<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#dan-boneh---blockchain-primitives---cryptography-and-consensus\"></a></h1>\n<p><a href=\"https://www.youtube.com/watch?v=V0JdeRzVndI&#x26;list=PLK9Lwn4_TfLS3I9huJjd-k_FeMKiTkAff&#x26;index=2\">https://www.youtube.com/watch?v=V0JdeRzVndI&#x26;list=PLK9Lwn4_TfLS3I9huJjd-k_FeMKiTkAff&#x26;index=2</a></p>\n<h1 id=\"what-is-a-blockchain\">What is a blockchain?<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#what-is-a-blockchain\"></a></h1>\n<p>4 layers</p>\n<pre><code>3   - User interface (web3)\n2   - Applications (solidity, move, motoko)\n1.5 - Compute Layer -- Blockchain computer\n1   - Consensus Layer\n</code></pre>\n<p>Most of the exciting action is in the application layer.</p>\n<h2 id=\"layer-1----consensus-layer\">Layer 1 -- Consensus layer<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#layer-1----consensus-layer\"></a></h2>\n<ul>\n<li>Public data structure (ledger) that provides\n<ul>\n<li>Persistence -- once added, data can never be removed (51% attack caveat)</li>\n<li>Consensus -- ALl honest participants have the same data (eventual consistency**)</li>\n<li>Liveness -- All honest participants can add data</li>\n<li>Open -- Anyone can be a participant (some blockchains are open, some are permissioned)</li>\n</ul>\n</li>\n</ul>\n<p>Not a new problem: Google, Amazon etc run a large number of machines that need to see the same data. Problem is called State machine regulation.\nKnown number of servers, all are authorize.</p>\n<p>Difference in blockchain: Anyone can participate.</p>\n<h3 id=\"how-are-blocks-added-to-the-chain\">How are blocks added to the chain?<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#how-are-blocks-added-to-the-chain\"></a></h3>\n<p>users can sign transactions, send to miners who add to blockchain, leader is elected, leader adds to chain, other miners validate, miner gets paid.</p>\n<p>Leader decided on the order of transaction in the block.</p>\n<p>For example: Who gets to sell first is decided by the miner, not good.</p>\n<p>Not solved: how to do this in a way that no single miner has this control on the order of the transactions in the blockchain.</p>\n<p><strong>Sybil attack</strong>: Miners could try to get elected every time by pretending to be a thousand different miners, other miners would never get elected</p>\n<p>Solve by forcing miners to commit resources.</p>\n<p>Bitcoin, you have to solve problems requiring hardware (<strong>proof-of-work</strong>). energy is wasted, is very slow.</p>\n<p><strong>Proof of stake</strong>: force people to commit to funds instead of CPU.</p>\n<p><strong>Proof of space</strong>: Commit to disk space instead of compute power, doesn't take much energy.</p>\n<h2 id=\"layer-15----blockchain-computer\">Layer 1.5 -- Blockchain computer<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#layer-15----blockchain-computer\"></a></h2>\n<p>Write apps, post to the blockchain.\nPeople send transactions to blockchain computer, apps running on the computer reply.\nRunning apps on the blockchain means</p>\n<ul>\n<li>all code is open-source and public. No secrets because every thing is based on trust.</li>\n<li>public verifiability -- anyone can verify state transitions on the blockchain computer. IRL, you have to trust banks / social media platforms etc.</li>\n</ul>\n<h2 id=\"running-programs-on-a-blockchain\">Running programs on a blockchain<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#running-programs-on-a-blockchain\"></a></h2>\n<ul>\n<li>\n<p>Create an app</p>\n</li>\n<li>\n<p>post code to the blockchain. Code is a transaction in the chain.</p>\n</li>\n<li>\n<p>Someone sends transaction to the application, state changes in the application.</p>\n</li>\n<li>\n<p>Want to touch the blockchain as little as possible for scalability.</p>\n</li>\n</ul>\n<h2 id=\"execution-environment\">Execution environment<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#execution-environment\"></a></h2>\n<ul>\n<li>Bitcoin -- Bitcoin script, limited instruction set (no loops for example)</li>\n<li>Ethereum -- General programming environment, solidity, web3\n<ul>\n<li>Storing things on the blockchain is expensive.</li>\n<li>You have to pay to write today, will probably have to pay to store in the future.</li>\n<li>Developers will need to spend most of the time in removing data, not writing to the chain.</li>\n</ul>\n</li>\n<li>Modern blockchains are using WebAssembly -- write your app in favorite env, compile to WebAssembly, run on the blockchain.</li>\n</ul>\n<h2 id=\"decentralized-applications-dapps\">Decentralized Applications (dapps)<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#decentralized-applications-dapps\"></a></h2>\n<ul>\n<li>Languages: Solidity, Move</li>\n<li>If you make a mistake, you can lock out millions of dollars. Mistakes are costly!</li>\n</ul>\n<h2 id=\"layer-4---user-facing-servers\">Layer 4 - user facing servers<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#layer-4---user-facing-servers\"></a></h2>\n<ul>\n<li>Users talk to normal computers that talk to the blockchain.</li>\n<li>MakerDAO -- took Fed policy, implemented in an algorithm</li>\n<li>Compound -- Lending platform</li>\n</ul>\n<h1 id=\"cryptographic-primitives\">Cryptographic primitives<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#cryptographic-primitives\"></a></h1>\n<p>Blockchains are consumers of cryptography.</p>\n<h2 id=\"digital-signatures--aggregation\">Digital signatures + aggregation<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#digital-signatures--aggregation\"></a></h2>\n<ul>\n<li>Physical signatures can't work in the digital world, because you can just copy the bits.</li>\n<li>Solution: Make the signature depend on the thing that you're signing. signing key + algorithm -> signature which can later be verified.</li>\n<li>Need your signing key to generate signatures.</li>\n</ul>\n<h3 id=\"signatures-on-the-blockchain\">Signatures on the blockchain<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#signatures-on-the-blockchain\"></a></h3>\n<ul>\n<li>Txn authorization</li>\n<li>Governance vots</li>\n<li>Consensus protocol votes.</li>\n</ul>\n<p>Note: ALL miners verify the signatures.</p>\n<h3 id=\"signature-aggregation\">Signature aggregation<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#signature-aggregation\"></a></h3>\n<p>Compression mechanism: Compress N signatures into 1, verify using all public keys + txn ids.</p>\n<p>Example: blockchain called chia: takes a bunch of transactions, aggregates and stores the aggregate, less data on the blockchain.</p>\n<h2 id=\"merkle-commitments\">Merkle commitments<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#merkle-commitments\"></a></h2>\n<p>Cryptographic commitment: Emulates an envelope.</p>\n<p>Sealed bid auction: every participant <strong>commits</strong> to its bid. Once all bids are in, auctioneer can see who wins the auction.</p>\n<p>Commit(data) => (com, open)\nVerify (data, com, open) => \"accept\" or \"reject\"</p>\n<p>Sealed bid in a digital environment:</p>\n<ul>\n<li>You send <code>com</code> and <code>open</code> to the auction house.</li>\n<li>Then the auctioneer can verify that you actually did commit <code>data</code> before.</li>\n</ul>\n<h3 id=\"properties\">Properties<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#properties\"></a></h3>\n<p>Binding: Cannot produce two valid openings.\nHiding: <code>com</code> cannot tell you the data.</p>\n<h3 id=\"merkle-tree\">Merkle tree<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#merkle-tree\"></a></h3>\n<p>Succinct commitment / Merkle tree: commit to gigabytes of data in 32 bytes and open individual cells correctly\nWrite merkle commitment of 1000s of transactions in one block.</p>\n<p>Applications:</p>\n<ul>\n<li>proof of payment by quick verification of commitments</li>\n<li>keeping state of chain: Database of account balances off chain. off-chain: servers with balances, on-chain: short commitment of balances, don't need to write entire database on the blockchain.</li>\n</ul>\n<h2 id=\"zero-knowledge-proof-system\">Zero knowledge proof system<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#zero-knowledge-proof-system\"></a></h2>\n<p>Anything that can be proved can also be proved in zero knowledge.</p>\n<p>Prover wants to prove: \"I have a signature on Txn, witness: signature\" in zero knowledge without telling the signature\nProver gives the proof to the verifier and verifier verifies the proof.</p>\n<p>SNARK // zkSNARK</p>\n<p>Libraris for zkSnark: circom, zinc</p>\n<p>Succinct proofs: put in a rollup server, so that miners only have to verify succinct proofs of the transactions instead of verifying all txns.</p>\n<p>Application 2: Private data on a public blockchain. Currently, all txns are public.</p>\n<p>Write only <em>commitments</em> to the blockchain,</p>\n<h2 id=\"remember\">REMEMBER<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#remember\"></a></h2>\n<ul>\n<li>don't put data on the blockchain, it's not a database.</li>\n<li>Always ask: why not use a centralized system?</li>\n<li>Blockchains are best when there is NO single party that you can trust.</li>\n<li>very likely that we'll converge onto small number of architectures from the large number of blockchains.</li>\n</ul>\n<hr>\n<strong>Backlinks</strong>\n<ul>\n<li><a href=\"/notes/qIDKNY3T3p7TIDspuJyQH\">a16z crypto startup school</a></li>\n</ul>","noteIndex":{"id":"root","title":"Notes","desc":"","updated":1676546314176,"created":1595961348801,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"vault"},"contentHash":"a63bc749050c89d4e92bc7f1ce268820","links":[{"type":"wiki","from":{"fname":"root","id":"root","vaultName":"vault"},"value":"history.laphams_quarterly.democracy.campaign_finance","position":{"start":{"line":13,"column":3,"offset":455},"end":{"line":13,"column":59,"offset":511},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"history.laphams_quarterly.democracy.campaign_finance"}},{"type":"wiki","from":{"fname":"root","id":"root","vaultName":"vault"},"value":"engineering.being_a_mentor","position":{"start":{"line":14,"column":3,"offset":514},"end":{"line":14,"column":33,"offset":544},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"engineering.being_a_mentor"}},{"type":"wiki","from":{"fname":"root","id":"root","vaultName":"vault"},"value":"history.china.dynasties","position":{"start":{"line":15,"column":3,"offset":547},"end":{"line":15,"column":30,"offset":574},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"history.china.dynasties"}},{"type":"wiki","from":{"fname":"root","id":"root","vaultName":"vault"},"value":"history.india.indira_gandhi","position":{"start":{"line":16,"column":3,"offset":577},"end":{"line":16,"column":34,"offset":608},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"history.india.indira_gandhi"}},{"type":"wiki","from":{"fname":"root","id":"root","vaultName":"vault"},"value":"books","alias":"here","position":{"start":{"line":18,"column":35,"offset":644},"end":{"line":18,"column":49,"offset":658},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"books"}},{"type":"wiki","from":{"fname":"root","id":"root","vaultName":"vault"},"value":"engineering.dendron","alias":"Dendron","position":{"start":{"line":20,"column":21,"offset":681},"end":{"line":20,"column":52,"offset":712},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"engineering.dendron"}}],"anchors":{},"children":["05zaQJMyCo5kYcUdfqHbU","3dca4f75-0a84-4596-8fd3-38f0adbef2b9","2fr0tv2ahut83b6g2w81mz0","596IGh04441uyLbbpkFT1","3j8u7RlelDYoffRQgMIYg","vwq8iGNrINwTnn2qz9cR1","J6qb2iUM2ZMqAYgQQELzQ","tbk0j8n293h69lwldtfsg3u","fSkjQcqYZTGdomGRSlszf","T4ea2dCnXXW7SbPu0BnwF","G9wFXoaipKfEf6FlKdHH0","qvk3fygz1m6ws2fji5retj1","8zcz6vwjqab27tqeygao1p7","7nAQ226q3pwfVvQ9KSV80","XLgWwAI1l8XFqJ55YDMXU","Y48aQXzL3qv0LWZAG5Kbz","njqts253mv1fp9o0jkcw1fe","ceddHaDRTozEjfGqQbeNi","9bn8iwfv72uv75ionw8ftql","9mktb5y6nj7k2ybk8skpluv","8hwssya27ueepgrhlpdrfjd","7gck2zgd0zwdmgk9qgpos18","f01xrwkzbb4fzmupyjke59w","lqzeenqabtz689u30ii9azs","m1jb1iraefzo1rm6etj0du4","7can3uzghi01mfsp134rspp","q7wfcfca8zpa4z1i311vbq5","qyxwih7t2evrubc8r1ei6cb","w7j8brta5l7nl4s9izbzqns","n71onqf9jip4rfm15wkhkcr","paatgicnci0cib43y2dq09m","tpt26m8fl897kze8lssgt00"],"parent":null,"data":{},"body":"\nHi! I'm Param! This is a place for my personal notes.\n\nMy website is https://param.codes, and I write more readable\nstuff on my substack: https://newsletter.param.codes.\n\nI've found that taking notes helps me remember things, and it's nice\nto look back on information that you processed years ago. I jot down random things, there's no real structure, but some of these\nnotes could eventually become blog posts.\n\nSome notes you might find interesting:\n\n- [[history.laphams_quarterly.democracy.campaign_finance]]\n- [[engineering.being_a_mentor]]\n- [[history.china.dynasties]]\n- [[history.india.indira_gandhi]]\n\nI also keep notes on books I read [[here|books]].\n\nThis is built using [[Dendron|engineering.dendron]] and hosted using\n[GitHub Pages](https://github.com/paramsingh/notes).\n\nGet in touch via [Twitter](https://twitter.com/iliekcomputers) or email me at `me [at] param [dot] codes`!\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"previewV2Enabled":false,"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":false,"leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2,"vaultSelectionModeOnCreate":"smart"}},"insertNote":{"initialValue":"templates"},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"randomNote":{},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"dendronVersion":"0.89.0","vaults":[{"fsPath":"vault"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":true,"maxPreviewsCached":10,"maxNoteLength":204800,"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link","taskCompleteStatus":["done","x"]},"enableUserTags":true,"enableHashTags":true,"enableEditorDecorations":true,"enableHandlebarTemplates":true,"enableFullHierarchyNoteTitle":false,"enableSmartRefs":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false,"enableFrontmatterTags":true,"enableHashesForFMTags":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"/param/notes","description":"param's notes"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"lookup","enableMermaid":true,"siteUrl":"https://notes.param.codes/","duplicateNoteBehavior":{"action":"useVault","payload":["vault"]},"siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true}
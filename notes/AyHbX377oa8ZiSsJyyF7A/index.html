<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="icon" href="/favicon.ico"/><title>Week of December 12, 2021</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="param&#x27;s notes"/><meta property="og:title" content="Week of December 12, 2021"/><meta property="og:description" content="param&#x27;s notes"/><meta property="og:url" content="https://notes.param.codes//notes/AyHbX377oa8ZiSsJyyF7A/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="12/10/2021"/><meta property="article:modified_time" content="12/10/2021"/><link rel="canonical" href="https://notes.param.codes//notes/AyHbX377oa8ZiSsJyyF7A/"/><meta name="next-head-count" content="14"/><link rel="preload" href="/_next/static/css/8e7b7e4bce421c0a.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8e7b7e4bce421c0a.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-3d209faeb64f2f97.js" defer=""></script><script src="/_next/static/chunks/framework-28c999baf2863c3d.js" defer=""></script><script src="/_next/static/chunks/main-104451f3d1a5c4bc.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6b338472289fe290.js" defer=""></script><script src="/_next/static/chunks/935-4dee79e80b8641c6.js" defer=""></script><script src="/_next/static/chunks/6-50972def09142ee2.js" defer=""></script><script src="/_next/static/chunks/pages/notes/%5Bid%5D-78d472fa3b924116.js" defer=""></script><script src="/_next/static/zZnpCTCayXwJ18C0XlzbS/_buildManifest.js" defer=""></script><script src="/_next/static/zZnpCTCayXwJ18C0XlzbS/_ssgManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><section class="ant-layout" style="width:100%;min-height:100%"><header class="ant-layout-header" style="position:fixed;isolation:isolate;z-index:1;width:100%;border-bottom:1px solid #d4dadf;height:64px;padding:0 24px 0 2px"><div class="ant-row ant-row-center" style="max-width:992px;justify-content:space-between;margin:0 auto"><div style="display:flex" class="ant-col ant-col-xs-20 ant-col-sm-4"></div><div class="ant-col gutter-row ant-col-xs-0 ant-col-sm-20 ant-col-md-20 ant-col-lg-19"><div class="ant-select ant-select-lg ant-select-auto-complete ant-select-single ant-select-allow-clear ant-select-show-search" style="width:100%"><div class="ant-select-selector"><span class="ant-select-selection-search"><input type="search" autoComplete="off" class="ant-select-selection-search-input" role="combobox" aria-haspopup="listbox" aria-owns="undefined_list" aria-autocomplete="list" aria-controls="undefined_list" aria-activedescendant="undefined_list_0" value=""/></span><span class="ant-select-selection-placeholder">For full text search please use the &#x27;?&#x27; prefix. e.g. ? Onboarding</span></div></div></div><div style="display:none;align-items:center;justify-content:center" class="ant-col ant-col-xs-4 ant-col-sm-4 ant-col-md-0 ant-col-lg-0"><span role="img" aria-label="menu" style="font-size:24px" tabindex="-1" class="anticon anticon-menu"><svg viewBox="64 64 896 896" focusable="false" data-icon="menu" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"></path></svg></span></div></div></header><section class="ant-layout" style="margin-top:64px;display:flex;flex-direction:row"><div class="site-layout-sidebar" style="flex:0 0 auto;width:calc(max((100% - 992px) / 2, 0px) + 200px);min-width:200px;padding-left:calc((100% - 992px) / 2)"><aside class="ant-layout-sider ant-layout-sider-dark" style="position:fixed;overflow:auto;height:calc(100vh - 64px);background-color:transparent;flex:0 0 200px;max-width:200px;min-width:200px;width:200px"><div class="ant-layout-sider-children"></div></aside></div><main class="ant-layout-content side-layout-main" style="max-width:1200px;min-width:0;display:block"><div style="padding:0 24px"><div class="main-content" role="main"><div class="ant-row"><div class="ant-col ant-col-24"><div class="ant-row" style="margin-left:-10px;margin-right:-10px"><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-24 ant-col-md-18"><div><h1 id="week-of-december-12-2021">Week of December 12, 2021<a aria-hidden="true" class="anchor-heading icon-link" href="#week-of-december-12-2021"></a></h1>
<h1 id="golang-and-irritating-tests">Golang and irritating tests<a aria-hidden="true" class="anchor-heading icon-link" href="#golang-and-irritating-tests"></a></h1>
<p>I've been learning a lot of Go in recent times. I'm learning how Go web applications work. It's a bit overwhelming that there are so many things that you can use to build Go web applications. So far, I've seen the following libraries in use in real services:</p>
<ul>
<li><a href="https://www.gorillatoolkit.org/">Gorilla</a></li>
<li><a href="https://goji.io/">Goji</a></li>
<li><a href="https://pkg.go.dev/net/http">net/http</a></li>
</ul>
<p>The good thing is that they are all kinda similar at the core, so you're not really drowning in the multitude of ways to do the same thing.</p>
<p>I'm not a Go expert by any means, and I did hit an issue that I did not like. There's no good way to mock internal dependencies in tests in Go.</p>
<p>For example, let's take this Python test</p>
<pre class="language-python"><code class="language-python"><span class="token comment"># code</span>
<span class="token keyword">def</span> <span class="token function">my_method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    internal_method<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># tests</span>
<span class="token decorator annotation punctuation">@patch</span><span class="token punctuation">(</span><span class="token string">'internal_method'</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">test_my_method</span><span class="token punctuation">(</span>mock_internal_method<span class="token punctuation">)</span><span class="token punctuation">:</span>
    my_method<span class="token punctuation">(</span><span class="token punctuation">)</span>
    mock_internal_method<span class="token punctuation">.</span>assert_called_once<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>There is no real Go equivalent to the <code>mock_internal_method.assert_called_once()</code>.
As I understand, you either need to make the <code>internal_method</code> something
that <code>my_method</code> takes as an input, so that your test can pass in a mock method.
There's a good <a href="https://stackoverflow.com/questions/52381358/test-that-method-is-called-in-handler-in-golang">post</a>
on stack overflow about this. This does make things a bit more complicated than needed, but I gueuss Go is
opinionated and this is just one of those opinions.</p>
<p>The Go equivalent to the same test would be something like this.</p>
<pre class="language-go"><code class="language-go"><span class="token comment">// code</span>

<span class="token comment">// need to create this struct to wrap the real internalMethod</span>
<span class="token comment">// so that we can inject a mock value for internalMethod in our tests</span>
<span class="token keyword">type</span> internalMethodStruct <span class="token keyword">struct</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>im <span class="token operator">*</span>internalMethodStruct<span class="token punctuation">)</span> <span class="token function">InternalMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">internalMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">MyMethod</span><span class="token punctuation">(</span>im internalMethodStruct<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    im<span class="token punctuation">.</span><span class="token function">InternalMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// tests</span>
<span class="token keyword">type</span> spy <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    called boolean
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>s <span class="token operator">*</span>spy<span class="token punctuation">)</span> <span class="token function">InternalMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    s<span class="token punctuation">.</span>called <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">TestMyMethod</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    spyObj <span class="token operator">:=</span> <span class="token operator">&#x26;</span>spy<span class="token punctuation">{</span>called<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">}</span>
    <span class="token function">MyMethod</span><span class="token punctuation">(</span>spyObj<span class="token punctuation">)</span>
    assert<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> spyObj<span class="token punctuation">.</span>called<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<p>See how much work that is! The fact that you have to create an interface,
make your method take the interface as input and then
create a spy in the test seems a bit too much to me.</p>
<h1 id="write-good-documentation">Write good documentation.<a aria-hidden="true" class="anchor-heading icon-link" href="#write-good-documentation"></a></h1>
<p>My team owns some docs that have been read by basically every team in the engineering org at this point. I spent last week identifying issues in those docs and then improving them by fixing those issues. There are a couple of interesting things I noticed that I've internalized as good things to keep in mind when writing documentation.</p>
<ul>
<li>
<p>If you're asking someone to do some work like migrating to a secure library you built instead of rolling their own code, you really really need to be very clear on why that work is important. If you don't get it across that the work is important, the person doing it will think "Why am I even doing this?!" the instant they find something confusing. You're basically setting your docs up for failure if the motivation of the work is not clear.</p>
</li>
<li>
<p>You need to make things as obvious as possible. As much as possible, give the reader a clear default wherever they have to make a choice, with a link to other choices possible. Putting a list of choices in front of the reader is just asking for confusion.</p>
<ul>
<li>
<p><strong>Good</strong>: You need to do X. There are multiple ways to do it but we strongly recommend the way A. There are other ways to do it, see this linked supporting doc.</p>
</li>
<li>
<p><strong>Bad</strong>: You need to do X. Based on your usecase, you can either do it in the A way or the B way or the C way.</p>
</li>
</ul>
<p>This example is overly simple, but the point still stands.</p>
</li>
<li>
<p>The structure of your document is really important. You do not want to put things that the reader doesn't care about at the top and the meat of the content near the bottom. Doing this is basically an invitation asking people to not read your document carefully and just skim it.</p>
</li>
</ul>
<h1 id="things-of-interest">Things of interest<a aria-hidden="true" class="anchor-heading icon-link" href="#things-of-interest"></a></h1>
<h2 id="indias-population">India's population<a aria-hidden="true" class="anchor-heading icon-link" href="#indias-population"></a></h2>
<p><a href="https://www.economist.com/asia/2021/12/02/indias-population-will-start-to-shrink-sooner-than-expected">https://www.economist.com/asia/2021/12/02/indias-population-will-start-to-shrink-sooner-than-expected</a></p>
<p>India's fertility rate has fallen below replacement level.</p>
<blockquote>
<p>This is big news not just for India but, seeing that its 1.4bn people are nearly a fifth of humanity, for the planet. The number of Indians will still grow, because many young women have yet to reach child-bearing age. But lower fertility means the population will peak sooner and at a lower figure: not in 40 years at more than 1.7bn, as was widely predicted, but probably a decade earlier, at perhaps 1.6bn.</p>
</blockquote>
<h2 id="world-chess-championship">World Chess Championship<a aria-hidden="true" class="anchor-heading icon-link" href="#world-chess-championship"></a></h2>
<p>Magnus Carlsen defended his championship today, destroying Ian Nepomniachtchi 7.5 - 3.5, winning 4 games, drawing 7 and losing none. The first 5 games of the match were draws, but in game 6, Magnus won after playing a 136 move game that went on for ~8 hours. In the end, the game was a theoretical draw, but Magnus kept pushing until Nepomniachtchi made a losing mistake.</p>
<p>The psychological impact of this long game was really interesting to me, because after this, Nepomniachtchi crumbled, playing "below grandmaster level" (in his own words), and losing 3 games out of the 5 that were played after game 6. Computers don't have such psychological issues.</p>
<p>The 136 move game is one of the best chess games I've seen: <a href="https://www.youtube.com/watch?v=PmQs1KhB948">https://www.youtube.com/watch?v=PmQs1KhB948</a></p>
<hr>
<strong>Backlinks</strong>
<ul>
<li><a href="/notes/oYxY2J0fwXimjoaq77XxA">Weekly</a></li>
<li><a href="/notes/8h7vYTsZBoAeeHxSmDv2I">2021</a></li>
</ul></div></div><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-0 ant-col-md-6"><div><div class=""><div class="ant-anchor-wrapper dendron-toc" style="max-height:calc(100vh - 64px);z-index:1"><div class="ant-anchor"><div class="ant-anchor-ink"><span class="ant-anchor-ink-ball"></span></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#golang-and-irritating-tests" title="Golang and irritating tests">Golang and irritating tests</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#write-good-documentation" title="Write good documentation.">Write good documentation.</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#things-of-interest" title="Things of interest">Things of interest</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#indias-population" title="India&#x27;s population">India&#x27;s population</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#world-chess-championship" title="World Chess Championship">World Chess Championship</a></div></div></div></div></div></div></div></div></div></div></div><div class="ant-divider ant-divider-horizontal" role="separator"></div><footer class="ant-layout-footer" style="padding:0 24px 24px"></footer></main></section></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"note":{"id":"AyHbX377oa8ZiSsJyyF7A","title":"Week of December 12, 2021","desc":"","updated":1639176805845,"created":1639165958119,"custom":{},"fname":"blog.weekly.2021.12.10","type":"note","vault":{"fsPath":"vault"},"contentHash":"2d545c90f6cfcf9a19149eb5e15ee5ec","links":[{"from":{"fname":"blog.weekly","id":"oYxY2J0fwXimjoaq77XxA","vaultName":"vault"},"type":"backlink","position":{"start":{"line":9,"column":3,"offset":165},"end":{"line":9,"column":29,"offset":191},"indent":[]},"value":"blog.weekly.2021.12.10"},{"from":{"fname":"blog.weekly.2021","id":"8h7vYTsZBoAeeHxSmDv2I","vaultName":"vault"},"type":"backlink","position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":29,"offset":29},"indent":[]},"value":"blog.weekly.2021.12.10"}],"anchors":{"golang-and-irritating-tests":{"type":"header","text":"Golang and irritating tests","value":"golang-and-irritating-tests","line":8,"column":0,"depth":1},"write-good-documentation":{"type":"header","text":"Write good documentation.","value":"write-good-documentation","line":79,"column":0,"depth":1},"things-of-interest":{"type":"header","text":"Things of interest","value":"things-of-interest","line":95,"column":0,"depth":1},"indias-population":{"type":"header","text":"India's population","value":"indias-population","line":97,"column":0,"depth":2},"world-chess-championship":{"type":"header","text":"World Chess Championship","value":"world-chess-championship","line":105,"column":0,"depth":2}},"children":[],"parent":"4HCAwuM8CvpzhfW3CQvZV","data":{}},"body":"\u003ch1 id=\"week-of-december-12-2021\"\u003eWeek of December 12, 2021\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#week-of-december-12-2021\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003ch1 id=\"golang-and-irritating-tests\"\u003eGolang and irritating tests\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#golang-and-irritating-tests\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003cp\u003eI've been learning a lot of Go in recent times. I'm learning how Go web applications work. It's a bit overwhelming that there are so many things that you can use to build Go web applications. So far, I've seen the following libraries in use in real services:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.gorillatoolkit.org/\"\u003eGorilla\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://goji.io/\"\u003eGoji\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://pkg.go.dev/net/http\"\u003enet/http\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThe good thing is that they are all kinda similar at the core, so you're not really drowning in the multitude of ways to do the same thing.\u003c/p\u003e\n\u003cp\u003eI'm not a Go expert by any means, and I did hit an issue that I did not like. There's no good way to mock internal dependencies in tests in Go.\u003c/p\u003e\n\u003cp\u003eFor example, let's take this Python test\u003c/p\u003e\n\u003cpre class=\"language-python\"\u003e\u003ccode class=\"language-python\"\u003e\u003cspan class=\"token comment\"\u003e# code\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003emy_method\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    internal_method\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e# tests\u003c/span\u003e\n\u003cspan class=\"token decorator annotation punctuation\"\u003e@patch\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'internal_method'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003etest_my_method\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003emock_internal_method\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    my_method\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    mock_internal_method\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eassert_called_once\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThere is no real Go equivalent to the \u003ccode\u003emock_internal_method.assert_called_once()\u003c/code\u003e.\nAs I understand, you either need to make the \u003ccode\u003einternal_method\u003c/code\u003e something\nthat \u003ccode\u003emy_method\u003c/code\u003e takes as an input, so that your test can pass in a mock method.\nThere's a good \u003ca href=\"https://stackoverflow.com/questions/52381358/test-that-method-is-called-in-handler-in-golang\"\u003epost\u003c/a\u003e\non stack overflow about this. This does make things a bit more complicated than needed, but I gueuss Go is\nopinionated and this is just one of those opinions.\u003c/p\u003e\n\u003cp\u003eThe Go equivalent to the same test would be something like this.\u003c/p\u003e\n\u003cpre class=\"language-go\"\u003e\u003ccode class=\"language-go\"\u003e\u003cspan class=\"token comment\"\u003e// code\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// need to create this struct to wrap the real internalMethod\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e// so that we can inject a mock value for internalMethod in our tests\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003etype\u003c/span\u003e internalMethodStruct \u003cspan class=\"token keyword\"\u003estruct\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003efunc\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eim \u003cspan class=\"token operator\"\u003e*\u003c/span\u003einternalMethodStruct\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token function\"\u003eInternalMethod\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token function\"\u003einternalMethod\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003efunc\u003c/span\u003e \u003cspan class=\"token function\"\u003eMyMethod\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eim internalMethodStruct\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    im\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eInternalMethod\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// tests\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003etype\u003c/span\u003e spy \u003cspan class=\"token keyword\"\u003estruct\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    called boolean\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003efunc\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003es \u003cspan class=\"token operator\"\u003e*\u003c/span\u003espy\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token function\"\u003eInternalMethod\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    s\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ecalled \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token boolean\"\u003etrue\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003efunc\u003c/span\u003e \u003cspan class=\"token function\"\u003eTestMyMethod\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003et \u003cspan class=\"token operator\"\u003e*\u003c/span\u003etesting\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eT\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    spyObj \u003cspan class=\"token operator\"\u003e:=\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026#x26;\u003c/span\u003espy\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003ecalled\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token boolean\"\u003efalse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token function\"\u003eMyMethod\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003espyObj\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    assert\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eequal\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token boolean\"\u003etrue\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e spyObj\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ecalled\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSee how much work that is! The fact that you have to create an interface,\nmake your method take the interface as input and then\ncreate a spy in the test seems a bit too much to me.\u003c/p\u003e\n\u003ch1 id=\"write-good-documentation\"\u003eWrite good documentation.\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#write-good-documentation\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003cp\u003eMy team owns some docs that have been read by basically every team in the engineering org at this point. I spent last week identifying issues in those docs and then improving them by fixing those issues. There are a couple of interesting things I noticed that I've internalized as good things to keep in mind when writing documentation.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eIf you're asking someone to do some work like migrating to a secure library you built instead of rolling their own code, you really really need to be very clear on why that work is important. If you don't get it across that the work is important, the person doing it will think \"Why am I even doing this?!\" the instant they find something confusing. You're basically setting your docs up for failure if the motivation of the work is not clear.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eYou need to make things as obvious as possible. As much as possible, give the reader a clear default wherever they have to make a choice, with a link to other choices possible. Putting a list of choices in front of the reader is just asking for confusion.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eGood\u003c/strong\u003e: You need to do X. There are multiple ways to do it but we strongly recommend the way A. There are other ways to do it, see this linked supporting doc.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eBad\u003c/strong\u003e: You need to do X. Based on your usecase, you can either do it in the A way or the B way or the C way.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThis example is overly simple, but the point still stands.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eThe structure of your document is really important. You do not want to put things that the reader doesn't care about at the top and the meat of the content near the bottom. Doing this is basically an invitation asking people to not read your document carefully and just skim it.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1 id=\"things-of-interest\"\u003eThings of interest\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#things-of-interest\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003ch2 id=\"indias-population\"\u003eIndia's population\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#indias-population\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://www.economist.com/asia/2021/12/02/indias-population-will-start-to-shrink-sooner-than-expected\"\u003ehttps://www.economist.com/asia/2021/12/02/indias-population-will-start-to-shrink-sooner-than-expected\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eIndia's fertility rate has fallen below replacement level.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eThis is big news not just for India but, seeing that its 1.4bn people are nearly a fifth of humanity, for the planet. The number of Indians will still grow, because many young women have yet to reach child-bearing age. But lower fertility means the population will peak sooner and at a lower figure: not in 40 years at more than 1.7bn, as was widely predicted, but probably a decade earlier, at perhaps 1.6bn.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch2 id=\"world-chess-championship\"\u003eWorld Chess Championship\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#world-chess-championship\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eMagnus Carlsen defended his championship today, destroying Ian Nepomniachtchi 7.5 - 3.5, winning 4 games, drawing 7 and losing none. The first 5 games of the match were draws, but in game 6, Magnus won after playing a 136 move game that went on for ~8 hours. In the end, the game was a theoretical draw, but Magnus kept pushing until Nepomniachtchi made a losing mistake.\u003c/p\u003e\n\u003cp\u003eThe psychological impact of this long game was really interesting to me, because after this, Nepomniachtchi crumbled, playing \"below grandmaster level\" (in his own words), and losing 3 games out of the 5 that were played after game 6. Computers don't have such psychological issues.\u003c/p\u003e\n\u003cp\u003eThe 136 move game is one of the best chess games I've seen: \u003ca href=\"https://www.youtube.com/watch?v=PmQs1KhB948\"\u003ehttps://www.youtube.com/watch?v=PmQs1KhB948\u003c/a\u003e\u003c/p\u003e\n\u003chr\u003e\n\u003cstrong\u003eBacklinks\u003c/strong\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/oYxY2J0fwXimjoaq77XxA\"\u003eWeekly\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/notes/8h7vYTsZBoAeeHxSmDv2I\"\u003e2021\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","noteIndex":{"id":"root","title":"Notes","desc":"","updated":1676546314176,"created":1595961348801,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"vault"},"contentHash":"a63bc749050c89d4e92bc7f1ce268820","links":[{"type":"wiki","from":{"fname":"root","id":"root","vaultName":"vault"},"value":"history.laphams_quarterly.democracy.campaign_finance","position":{"start":{"line":13,"column":3,"offset":455},"end":{"line":13,"column":59,"offset":511},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"history.laphams_quarterly.democracy.campaign_finance"}},{"type":"wiki","from":{"fname":"root","id":"root","vaultName":"vault"},"value":"engineering.being_a_mentor","position":{"start":{"line":14,"column":3,"offset":514},"end":{"line":14,"column":33,"offset":544},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"engineering.being_a_mentor"}},{"type":"wiki","from":{"fname":"root","id":"root","vaultName":"vault"},"value":"history.china.dynasties","position":{"start":{"line":15,"column":3,"offset":547},"end":{"line":15,"column":30,"offset":574},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"history.china.dynasties"}},{"type":"wiki","from":{"fname":"root","id":"root","vaultName":"vault"},"value":"history.india.indira_gandhi","position":{"start":{"line":16,"column":3,"offset":577},"end":{"line":16,"column":34,"offset":608},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"history.india.indira_gandhi"}},{"type":"wiki","from":{"fname":"root","id":"root","vaultName":"vault"},"value":"books","alias":"here","position":{"start":{"line":18,"column":35,"offset":644},"end":{"line":18,"column":49,"offset":658},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"books"}},{"type":"wiki","from":{"fname":"root","id":"root","vaultName":"vault"},"value":"engineering.dendron","alias":"Dendron","position":{"start":{"line":20,"column":21,"offset":681},"end":{"line":20,"column":52,"offset":712},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"engineering.dendron"}}],"anchors":{},"children":["05zaQJMyCo5kYcUdfqHbU","3dca4f75-0a84-4596-8fd3-38f0adbef2b9","2fr0tv2ahut83b6g2w81mz0","596IGh04441uyLbbpkFT1","3j8u7RlelDYoffRQgMIYg","vwq8iGNrINwTnn2qz9cR1","J6qb2iUM2ZMqAYgQQELzQ","tbk0j8n293h69lwldtfsg3u","fSkjQcqYZTGdomGRSlszf","T4ea2dCnXXW7SbPu0BnwF","sfaxl8m0scx0iylroh2nt27","G9wFXoaipKfEf6FlKdHH0","qvk3fygz1m6ws2fji5retj1","8zcz6vwjqab27tqeygao1p7","7nAQ226q3pwfVvQ9KSV80","XLgWwAI1l8XFqJ55YDMXU","Y48aQXzL3qv0LWZAG5Kbz","njqts253mv1fp9o0jkcw1fe","ceddHaDRTozEjfGqQbeNi","9bn8iwfv72uv75ionw8ftql","qjsa2cqk7wwmsxkd63tqmzo","i137wds83cgyiqkpuorvrgh","nbajhp0d12thgwdtlxlo4s5","j9m60mwn8tah0puxr287hbz","awb5kxy7q19yk7564umdlz1","sxs92ymdmvudd9w9abdf2xm","maqyjfimzm1xlreqrnp0ubv","occnxujjcmph9kqq4dtx79g","0r968pvsf565fs54ac85ug0","0iug0cqfida2w3bw9r2y39x","71jowrrvmteaz6vmk3ljq0z","4rahpe1jwc8wf301wril41i","ooi7xp8hw96cr9v8eeg0qxn","100p65il8y0afy0ut38euym","ue8gju4jz5sa6s57r0qbkeq","4uelk0suzbfnl472i8zxi5p","56i0l7vo9k1enmfm627d4q1","52ertzgdog1o9jfdtga8vvt","0lisa2vcu9jh435u9gks8p5"],"parent":null,"data":{},"body":"\nHi! I'm Param! This is a place for my personal notes.\n\nMy website is https://param.codes, and I write more readable\nstuff on my substack: https://newsletter.param.codes.\n\nI've found that taking notes helps me remember things, and it's nice\nto look back on information that you processed years ago. I jot down random things, there's no real structure, but some of these\nnotes could eventually become blog posts.\n\nSome notes you might find interesting:\n\n- [[history.laphams_quarterly.democracy.campaign_finance]]\n- [[engineering.being_a_mentor]]\n- [[history.china.dynasties]]\n- [[history.india.indira_gandhi]]\n\nI also keep notes on books I read [[here|books]].\n\nThis is built using [[Dendron|engineering.dendron]] and hosted using\n[GitHub Pages](https://github.com/paramsingh/notes).\n\nGet in touch via [Twitter](https://twitter.com/iliekcomputers) or email me at `me [at] param [dot] codes`!\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"previewV2Enabled":false,"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":false,"leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2,"vaultSelectionModeOnCreate":"smart"}},"insertNote":{"initialValue":"templates"},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"randomNote":{},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"dendronVersion":"0.89.0","vaults":[{"fsPath":"vault"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":true,"maxPreviewsCached":10,"maxNoteLength":204800,"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link","taskCompleteStatus":["done","x"]},"enableUserTags":true,"enableHashTags":true,"enableEditorDecorations":true,"enableHandlebarTemplates":true,"enableFullHierarchyNoteTitle":false,"enableSmartRefs":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false,"enableFrontmatterTags":true,"enableHashesForFMTags":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"/param/notes","description":"param's notes"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"lookup","enableMermaid":true,"siteUrl":"https://notes.param.codes/","duplicateNoteBehavior":{"action":"useVault","payload":["vault"]},"siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true},"page":"/notes/[id]","query":{"id":"AyHbX377oa8ZiSsJyyF7A"},"buildId":"zZnpCTCayXwJ18C0XlzbS","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>
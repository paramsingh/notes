<!DOCTYPE html>

<html lang="en-US">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
  
  <title>ListenBrainz release process changes - /param/notes</title>
  

  <link
    rel="shortcut icon"
    href="https://notes.param.codes/favicon.ico"
    type="image/x-icon"
  />
  <link
    rel="stylesheet"
    href="https://notes.param.codes/assets/css/just-the-docs-default.css"
  />
  <script
    type="text/javascript"
    src="https://notes.param.codes/assets/js/just-the-docs.js"
  ></script>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/themes/prism.min.css"
  />
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"
    integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X"
    crossorigin="anonymous"
  />
  <script
    type="text/javascript"
    src="https://notes.param.codes/assets/js/vendor/lunr.min.js"
  ></script>
  
  <meta name="viewport" content="width=device-width, initial-scale=1" />
   
  
<meta name="description" content="My notes">
<meta name="author" content="">

<link rel="canonical" href="https://notes.param.codes//notes/27869ad9-d1bc-4585-b57c-8a8450f37c1b.html">

<meta property="og:type" content="article">
<meta property="og:url" content="https://notes.param.codes//notes/27869ad9-d1bc-4585-b57c-8a8450f37c1b.html">
<meta property="og:description" content="My notes">
<meta property="og:image" content="https://notes.param.codes/undefined">

<meta name="twitter:card" content="summary">

<meta name="twitter:url" content="https://notes.param.codes//notes/27869ad9-d1bc-4585-b57c-8a8450f37c1b.html">
<meta name="twitter:description" content="My notes">
<meta name="twitter:image" content="https://notes.param.codes/undefined">


  <meta property="og:title" content="ListenBrainz release process changes - /param/notes" />
  <meta name="twitter:title" content="ListenBrainz release process changes - /param/notes" />
  
</head>


<body>
    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
      <symbol id="svg-link" viewBox="0 0 24 24">
        <title>Link</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link">
          <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
        </svg>
      </symbol>
      <symbol id="svg-search" viewBox="0 0 24 24">
        <title>Search</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search">
          <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>
        </svg>
      </symbol>
      <symbol id="svg-menu" viewBox="0 0 24 24">
        <title>Menu</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu">
          <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </symbol>
      <symbol id="svg-arrow-right" viewBox="0 0 24 24">
        <title>Expand</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </symbol>
      <symbol id="svg-doc" viewBox="0 0 24 24">
        <title>Document</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file">
          <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline>
        </svg>
      </symbol>
    </svg>

    <div class="side-bar">
      <div class="site-header">
        <a href="https://notes.param.codes" class="site-title lh-tight">
  /param/notes

 </a>
        <a href="#" id="menu-button" class="site-button">
          <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg>
        </a>
      </div>

      <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav">
      </nav>
      <footer class="site-footer">
        ðŸŒ± with ðŸ’• using <a href="https://www.dendron.so/"> Dendron ðŸŒ² </a>
      </footer>
    </div>
    <div class="main" id="top">
        <div id="main-header" class="main-header">
          
            <div class="search">
              <div class="search-input-wrap">
                <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search /param/notes" aria-label="Search /param/notes" autocomplete="off">
                <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label>
              </div>
              <div id="search-results" class="search-results"></div>
            </div>
          
          
    </div>
    <div id="main-content-wrap" class="main-content-wrap">
      
        
          <nav aria-label="Breadcrumb" class="breadcrumb-nav">
            <ol class="breadcrumb-nav-list"><li class="breadcrumb-nav-list-item"><a href="https://notes.param.codes">Notes</a></li><li class="breadcrumb-nav-list-item"><a href="https://notes.param.codes/notes/e6a6d568-6a65-4d59-9d87-2037a3fe1b30.html">Engineering</a></li><li class="breadcrumb-nav-list-item">ListenBrainz release process changes</li></ol>
          </nav>
        
      
      <div id="main-content" class="main-content" role="main">

        
        
        <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
        <script>mermaid.initialize({startOnLoad:true});</script>
        

        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>

        

        <script>
          $(function () {
            $('[data-toggle="popover"]').popover({html: true})
          })
        </script>

        

<div id="main" role="main">

  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="ListenBrainz release process changes">
    
    <meta itemprop="datePublished" content="2021-03-19T22:00:04+00:00">
    <meta itemprop="dateModified" content="2021-03-19T22:00:37+00:00">

    <div class="page__inner-wrap">

      

      <section class="page__content" itemprop="text">

        

        <h1 id="listenbrainz-release-process-changes"><a aria-hidden="true" class="anchor-heading" href="#listenbrainz-release-process-changes"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>ListenBrainz release process changes</h1>
<p>Over the past year, I've made a major change in how we think about releases for <a href="https://listenbrainz.org">ListenBrainz</a>.</p>
<h2 id="before"><a aria-hidden="true" class="anchor-heading" href="#before"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Before</h2>
<p>There were no real expectations around deployment after pull requests got merged.
There were two branches -- <code>master</code> and <code>production</code>. The HEAD of <code>production</code> is
what the site was running at any moment. People made pull requests based off <code>master</code>, stuff got merged into <code>master</code>
and <em>eventually</em> got released.</p>
<p>Each release required merging master into production. However, there may have been hotfixes to production in the meanwhile
as well. So what we ended up doing to bring master and production into sync was:</p>
<ol>
<li>Merge <code>master</code> into <code>production</code>.</li>
<li>Deploy the <code>production</code> branch.</li>
<li>Merge <code>production</code> back into <code>master</code>.</li>
</ol>
<p>The time between releases could be months! The commit difference between master and production
was often in the order of hundreds. This made releases painful and we had to be extra careful. If there
was a schema change involved, that made things even more complicated.</p>
<h2 id="after"><a aria-hidden="true" class="anchor-heading" href="#after"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>After</h2>
<p>The change that we made is merging stuff into master as often as possible. And as soon as it's merged, release
the changes into production. This set up a decent pipeline where each release consisted of a small number of pull requests,
making it much easier to release stuff.</p>
<p>Over the last 3 months, we've done 33 releases (almost 3 deploys a week), which account for ~400 commits.</p>
<p>There have been a number of advantages to this approach. The deployer doesn't feel as concerned releasing 1 small pull
request vs releasing 100 huge pull requests merged into master a few months ago. It also sets up a quick feedback loop
for the developer who gets to see their changes working in real life as soon as their pull request gets merged.</p>
<p>Given our engineering capacity, this new method of releasing stuff often has really helped in making ListenBrainz
a more active project.</p>
<hr>
<h2 id="backlinks"><a aria-hidden="true" class="anchor-heading" href="#backlinks"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Backlinks</h2>
<ul>
<li><a href="https://notes.param.codes/notes/3ef975da-c18f-45b4-a95f-532c7d20d83f.html">Being a GSoC mentor</a></li>
</ul><span id="navId" data="27869ad9-d1bc-4585-b57c-8a8450f37c1b"></span>

                
      </section>

      
    </div>

    
  </article>

  
  
</div>


        
          <hr>
          <footer>
            
            

            
                
              </div>
          </footer>
        
    </div>
</div>


  

  <div class="search-overlay"></div>

</div>
</body>
</html>
